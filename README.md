# merge request informer

___
### Команды

#### Общее:
Запуск прод версии:
```
$ npm i
$ npm run build
$ npm run start
```

Запуск дев версии:
```
$ npm i
$ npm run common:build
$ npm run dev
```

#### Команды для пакетов:

То что начинается с `bot:`, запускает соответствующую команду в пакете бота, например:

`npm run bot:build` - выполнит `build` команду в пакете бота.

То же самое справедливо и для остальных команд, таких как: `front:dev`, `common:build` и т.д.

#### Подробнее по командам

`npm run build` - запустит сборку каждого из пакетов

`npm run dev` - запустит бота в дев режиме, загрузит енв параметры из [.env](.env), также передаст енв параметр `ORIGIN` - откуда ему принимать запросы (хост фронта с портом по умолчанию http://localhost:8000).
Параллельно боту запустит фронт в дев режиме с портом по умолчанию 8000.

`npm run stop` - удалит все процессы pm2 вне зависимости от режима, будь то была запущен дев процесс или прод. 

`npm run start` - передаст енв переменную NODE_ENV=production и выполнит запуск бота.
Переменная повлияет на запускаемый скрипт в боте. Если прод - запустит сбилженненый скрипт бота в `dist`, в противном случае devю

---

### Структура пакетов
- packages/bot - папка самого бота и его сервера
- packages/common - папка общих типов, модулей, конфигов.
- packages/frontend - папка фронта.

---

### PM2 Конфиг
[ecosystem.config.js](ecosystem.config.js) - конфиг pm2

Импортирует [конфиг pm2 из бота](packages/bot/ecosystem.config.js), передает ему значения [.env из рутовой директории](.env).

___
### Env

Подробнее в [.env.example](.env.example)

___
### Patches

В проекте также есть патч vue-virtual-scroller пакета. 

Патч добавит дтс файлы к компонентам DynamicScroller и DynamicScrollerItem.
(через decalre module, к сожалению не получилось)
